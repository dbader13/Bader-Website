{{- define "main" -}}

<article class="article article-publication">
  <div class="article-container pt-3">
    
    {{/* Title */}}
    <h1 itemprop="name">{{ .Title }}</h1>

    {{/* Authors as clickable links */}}
    {{ with .Params.authors }}
    <div class="article-metadata">
      <span itemprop="author">
        {{- range $index, $author := . -}}
          {{- if $index }}, {{ end -}}
          <a href="{{ "/authors/" | relURL }}{{ $author | urlize }}/">{{ $author }}</a>
        {{- end -}}
      </span>
    </div>
    {{ end }}

    {{/* Date */}}
    {{ with .Date }}
    <div class="article-metadata">
      {{ .Format "January, 2006" }}
    </div>
    {{ end }}

    {{/* Publication links */}}
    <div class="btn-links mb-3">
      {{ partial "page_links" (dict "page" . "is_list" 0) }}
    </div>

    {{/* Abstract */}}
    {{ with .Params.abstract }}
    <h3>Abstract</h3>
    <p class="pub-abstract">{{ . | markdownify }}</p>
    {{ end }}

    {{/* Type and Publication in table format */}}
    <table style="margin: 2rem 0 2rem 3rem; border-collapse: collapse; border: none; width: auto; font-size: 1.1rem;">
      {{ with .Params.publication_types }}
      <tr style="border: none;">
        <td style="padding: 0.2rem 2rem 0.2rem 0; font-weight: bold; vertical-align: top; white-space: nowrap; border: none;">Type</td>
        <td style="padding: 0.2rem 0; border: none;">
          {{ if eq (index . 0) "article-journal" }}Journal article
          {{ else if eq (index . 0) "paper-conference" }}Conference paper
          {{ else if eq (index . 0) "chapter" }}Book chapter
          {{ else if eq (index . 0) "book" }}Book
          {{ else }}{{ index . 0 }}{{ end }}
        </td>
      </tr>
      {{ end }}
      
      {{ with .Params.publication }}
      <tr style="border: none;">
        <td style="padding: 0.2rem 2rem 0.2rem 0; font-weight: bold; vertical-align: top; white-space: nowrap; border: none;">Publication</td>
        <td style="padding: 0.2rem 0; border: none;">{{ . | markdownify }}</td>
      </tr>
      {{ end }}
    </table>

    {{/* Content */}}
    <div class="article-style">
      {{ .Content }}
    </div>

  </div>
</article>

{{- end -}}
